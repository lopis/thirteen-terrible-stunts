let ba=a=>a.replace(/^#?([a-f\d])([a-f\d])([a-f\d])([a-f\d])$/i,(b,c,d,e,h)=>"#"+c+c+d+d+e+e+h+h).substring(1).match(/.{2}/g).map(b=>parseInt(b,16)),ca="6v7ic 2rwzo 6nvic 58jgo 55eyo jz6bo   34ao 7k b28 m0 20o0o 9a7vy jbmjj jf63j ivhmn etrs7 ju8e7 jalrz jeyks jwdj3 jwdlv 2t8g 2t8s 34yo lskg m2yo jf4lo jysjy 98ruh j8htq 9v7zj j8d32 ju78f ju8t4 9ul2n g44e1 jykrj jewdq g4rbt fgsgv hha5t g6xgz 98rou j8d7c 98uwe j8d7d 9xgxq jykqs g3zn2 g3z9g b1ipn h4qu3 c8oz2 jhyfz    ".split(" "),f={},da=async(a,b,c)=>
{let d=a+c+b;if(!f[d]){var e=5*b,h=1*b,l=e+h,m=l*a.length-h,r=new ImageData(m,e),[y,w,x,B]=ba(c);a.replace("!","@").toUpperCase().split("").forEach((C,Ka)=>{String(parseInt(" "===C?"0":ca[C.charCodeAt(0)-35],36).toString(2)).padStart(25,"0").split("").forEach((D,La)=>{if("0"!==D)for(D=0;D<b;D++){var L=La*b;L=4*(Ka*l+L%e+b*m*Math.floor(L/e)+m*D);for(let aa=0;aa<b;aa++){let M=4*aa+L;r.data[M]=y;r.data[M+1]=w;r.data[M+2]=x;r.data[M+3]=B||255}}})});a=await createImageBitmap(r);f[d]=a}},ea=(a,{text:b,
color:c=g.l,textAlign:d="left",textBaseline:e="top",size:h=2,ra:l=999,...m})=>{let r=Math.round(m.x),y=Math.round(m.y);b||=" ";let w=5*h;var x=1*h;m=w+x;x=m*b.length-x;let B=b+c+h,C="left"===d?0:"center"===d?Math.round(x/2):x;d="top"===e?0:"middle"===e?Math.round(w/2):w;f[B]?(b=l*m,a.drawImage(f[B],0,0,b,m,r-C,y-d,b,m)):da(b,h,c).then(()=>{a.drawImage(f[B],r-C,y)})},fa=(a,b,c)=>{a.forEach(d=>{b.forEach(e=>da(d,c,e))})};function k(a){return.1>a&&-.1<a?0:a}
function ha(){var a=ia;let b=RegExp("(.{1,40})(\\s|$)","g"),c=[],d;for(;null!==(d=b.exec(a));)c.push(d[1].trim());return c}function n(a){return{x:Math.round(a.x),y:Math.round(a.y)}}function ja(a){let b={...a};Object.keys(b).forEach(c=>{b[c]*=1+.3*Math.random()});return b}let g={l:"#1F0A00",C:"#FFFCEA",u:"#A29782",v:"#CEC6AD"},ka=Object.values(g).join("").replace(/#/g,"");g.l.repeat(4);
let la="@@@@@@PUUE@PjjjA@ijjF@dZjY@PjjjA@iZeF@djjZ@PUUUAPijjFPdjjZQPUUUQ@TUUA@PA@E@@E@T@@T@PA@ @@@@@@@@@@@@@@@@@TUUA@djjZ@PjjjA@ijjF@dZjY@PjjjA@iZeF@TUUU@TjjjEDijjFQTUUUD@UUU@@@EPA@ @TUUA@djjZ@PjifA@ijjF@djUZ@PjjjQ@ijjFATUUUATjjjADiejFPTUUU@@UUU@@PAU@@@@U@@@@T@@@@@@@@ @@@@@@@@@@@@@@@@@@@@@@@@@@@PUUUA@YijZ@eejjFUVjjZEYiZfEdfffFPZZfYUiiijUUUUUE@D@@@@@U@@@ @@@@@@@UUE@@UUUA@ijjU@dfZZAPjYjE@iifV@ifZZAdjjjFPjUeZ@iZUjAPjjjA@TejU@UijUEUUjUUTUUUUA @@@@@@PUUE@PeZUAPijjU@ijjVAeUVYUTjifVQijjZEejjjUPjUjVAijjZ@PjjZ@@TiU@@@dF@@PUVUAPUUUU@ @TUU@@djjF@djjjAPUUUF@ijjV@djjjAPVjeF@ijjZ@djjjAPjUjF@djjF@@ejF@@@iF@@TeZU@TUYUEPUUUU@ @PA@E@PU@UAPUUUU@UiVUAPijUA@djZA@PfiF@@YfZ@@djjATdjjFPejjZ@djjZ@@UUU@@@@U@@@@UE@@PUUE@ p\u007f@@@@kC@@@lN@@@pz@@@@k\u007f\u007f\u007f@|njjCp~jjN@kkjz@lnjjCpzjjN@k\u007f\u007f\u007f@ljjjCpjjjN@k\u007f\u007fz@l~\u007fkCp\u007f@|O@ @\u007f\u007f\u007fC@kjjz@kjjjNkjjjjojjjj~jjjjzkjjjjojjjj~kjjj~{jjjns~\u007f\u007foCljjjCp\u007f\u007f\u007fO@kCpz@lN@kCp\u007f@|O@ @p\u007fO@@|jjO@ljzjCpjznNpjjnjCknjjNlnkjzpjkzjskjzn~ojjnzokjjz~z\u007f\u007f\u007fzkjjjj\u007f\u007f\u007f\u007f\u007f\u007fjjjjz|\u007f\u007f\u007f\u007f@ @pOpO@pjsjC@kNkNLlzozpC\u007fj\u007f@{sjz@l~kjCpzojN@{s\u007f\u007f@|@pN@p@pjC@@p~{@@pNpN@pN@lCpN@@{@O@@pC @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@|C@@@pW@@@@\u007fC@@@|K@@@@J@@@@@@@@@@@@@@@@@ @@@@@@@@@@@@TUE@@djjA@d~\u007fZ@T^UmAdZUUFPfVUZ@YjjjEtjjjfQujj^Fi}\u007f_ZPZUUZ@djjZ@@UUU@@@@@@@ PUUUU@ijjjAdjjjFPjjjZ@UUUUAt\u007f\u007f\u007fGPUUu^@@@P\u007fAPUEmGPTVt_@QYQ\u007fADeE}G@TUt_@UUU\u007fAt\u007f\u007f\u007fGPUUUU@ @@@@@@TUUA@TejZATUffEPUYZV@UejZAPeZiA@djjF@PUUU@PijjEPdjjFAQjjZDPUUUE@PAPA@@E@E@@@@@@@ @@@@@@PUUA@PjjZ@@ijjA@dZZF@PjiY@@iZiA@djjF@PUUU@PiZiEPdjjFAQUUUDPUUUE@PAPA@@E@E@@@@@@@ @@@@@@PUUA@PUUU@@ijjA@TUUE@PZiU@@ijjA@djjF@PUUU@PUUVEPTUYEAQUUUDPUUUE@PAPA@@E@E@@@@@@@ @@@@@@PUUE@PjjjA@ijjF@dZjY@PjjjA@iZeF@djjZ@PUUUAPijjFPdjjZQPUUUQ@TUUA@PA@E@@@@T@@@@PA@ @@@@@@PUUE@PjjjA@ijjF@dZjY@PjjjA@iZeF@djjZ@PUUUAPijjFPdjjZQPUUUQ@TUUA@@E@E@@T@T@@@@PA@ @@@@@@PUUE@PjjjA@ijjF@dZjY@PjjjA@iZeF@djjZ@PUUUAPijjFPdjjZQPUUUQ@TUUA@@EPA@@T@E@@PA@@@ @@@@@@PUUE@PjjjA@ijjF@dZjY@PjjjA@iZeF@djjZ@PUUUAPijjFPdjjZQPUUUQ@TUUA@@EPA@@T@@@@PA@@@ @@@@@@PUUE@PjjjA@ijjF@dZjY@PjjjA@iZeF@djjZ@PUUUAPijjFPdjjZQPUUUQ@TUUA@@E@E@@T@T@@PA@@@ @@@@@@PUUE@PjjjA@ijjF@dZjY@PjjjA@iZeF@djjZ@PUUUAPijjFPdjjZQPUUUQ@TUUA@@E@E@@T@T@@@@PA@".split(" "),ma=
[],na=[],oa=[],pa=[];async function qa(a,b){let c=[];[...b].map(h=>{h=h.charCodeAt(0);c.push(h&3);c.push(h>>2&3);c.push(h>>4&3)});b=Math.floor(Math.sqrt(c.length));let d=new ImageData(b,b);for(let h=0;h<b;h++)for(let l=0;l<b;l++)if(c[h*b+l]){var e=6*(c[h*b+l]-1);let [m,r,y,w]=ba("#"+ka.substring(e,e+6));e=4*(l+h*b);d.data[e]=m;d.data[e+1]=r;d.data[e+2]=y;d.data[e+3]=w||255}b=await createImageBitmap(d);ma[a]=b}
function p(a,b,c=!1,d=!1){var e=q;if(a=ma[a])e.g.save(),c&&(e.g.filter="brightness(0)"),e.g.translate(b.x+(d?a.width:0),b.y),e.g.save(),e.g.scale(d?-1:1,1),e.g.drawImage(a,0,0),e.g.restore(),e.g.restore()}function t(a,b){ea(a.g,b)}function ra(){var a=q;a.g.clearRect(0,0,320,260);a.g.fillStyle=g.C;a.g.fillRect(0,0,320,260)}function u(a,b,c,d,e){let {x:h,y:l}=n(b);a.g.fillStyle=d;a.g.fillRect(h,l,c.x,c.y);a.g.fillStyle=e||d;a.g.fillRect(h+1,l+1,c.x-2,c.y-2)}
function sa(){var a=q;a.g.save();a.g.translate(80,80);[{x:12,y:0},{x:0,y:12},{x:12,y:12},{x:24,y:12}].forEach(({x:b,y:c})=>{u(a,{x:b,y:c},{x:10,y:10},g.u,g.v)});t(a,{text:"move",x:18,y:30,textAlign:"center",size:2});a.g.restore();a.g.save();a.g.translate(200,70);[{text:"enter",y:0},{text:"or",y:12},{text:"space",y:24}].forEach(({text:b,y:c})=>{"or"!==b&&u(a,{x:0,y:c},{x:40,y:10},g.u,g.v);t(a,{text:b,x:20,y:c+3,size:1,textAlign:"center"})});t(a,{text:"action",x:20,y:40,textAlign:"center",size:2});
a.g.restore()}function ta(a,b,c){a.g.save();a.g.globalAlpha=.5;a.g.transform(c,-1+c,0,1,0,0);a.g.beginPath();a.g.moveTo(0,260);b.forEach(([d,e])=>{a.g.lineTo(320*d,260*e)});a.g.fillStyle=g.l;a.g.clip();a.g.fillRect(0,0,320,260);a.g.restore()}
function ua(a,b,c){a.g.save();a.g.transform(Math.pow(c,3),.5*(-1+c),0,1,0,0);a.g.beginPath();a.g.moveTo(0,260);b.forEach(([d,e])=>{a.g.lineTo(320*d,260*e)});a.g.fillStyle=g.C;a.g.strokeStyle=g.v;a.g.stroke();a.g.clip();b=Math.round(320/30);a.g.fillRect(0,0,320,260);for(c=0;30>c;c++)a.g.strokeRect(b*c,0,b,260);a.g.restore()}function va(a,b){var c=q;b=[[0,0],[.5,0],[1,.5],[.8,.5],[.8,.5-b.y],[1-(.2+b.x),.5-b.y],[1-(.2+b.x),.5+b.y],[.8,.5+b.y],[.8,.5],[1,.5],[.5,1],[0,1]];ta(c,b,a);ua(c,b,a)}
class wa{constructor(){this.g=c2d.getContext("2d",{alpha:!1});this.g.imageSmoothingEnabled=!1;let a=performance.now();Promise.all(la.map((b,c)=>qa(c,b))).then(()=>{console.debug(`Loaded icons in ${performance.now()-a}ms`);na=[15,16,17];oa=[4,5,6,7];pa=[18,19,20,21,22,23]})}}let q=new wa;function xa(a,b){var c=v;c.h=n({x:c.h.x+a,y:c.h.y+b})}function ya(a){a.A.forEach((b,c)=>{p(b,{...a.h,y:a.h.y-12*(c+1)})})}function z(a){var b=v;p(a,b.h,!1,b.H);ya(b)}
function za(a){var b=v;b.g+=a;60<=b.g&&(b.i=(b.i+1)%6,b.g-=60);p(pa[b.i],b.h,!1,b.H);ya(b)}class Aa{constructor(){this.i=this.g=0;this.size={x:16,y:16};this.h={x:0,y:0};this.H=!1;this.A=[];this.j=!1}}let v=new Aa;function A(a){var b=E,c=[];b.g=a;b.g.m?.(...c)}class Ba{constructor(...a){this.g=F;this.g.m?.(...a)}}let E;
class Ca{constructor(){this.L=this.N=this.P=this.O=this.K=this.G=!1;this.g=new Map;this.i={G:this.G,K:this.K,P:this.P,O:this.O,N:this.N,L:this.L};document.addEventListener("keydown",a=>{this.g.set(a.code,!0)});document.addEventListener("keyup",a=>{this.g.set(a.code,!1)});this.j=new DOMPoint}s(a){this.i.G=this.G;this.i.K=this.K;this.i.N=this.N;this.i.L=this.L;let b=this.g.get("KeyA")||this.g.get("KeyQ")||this.g.get("ArrowLeft")?-1:0,c=this.g.get("KeyD")||this.g.get("ArrowRight")?1:0,d=this.g.get("KeyW")||
this.g.get("KeyZ")||this.g.get("ArrowUp")?-1:0,e=this.g.get("KeyS")||this.g.get("ArrowDown")?1:0;this.j.x=b+c||0;this.j.y=d+e||0;this.G=0>this.j.y;this.K=0<this.j.y;this.O=0>this.j.x;this.P=0<this.j.x;this.N=!!this.g.get("Enter")||!!this.g.get("Space");(this.L=!!this.g.get("Escape"))&&E.g!=F&&A(F);this.G&&(this.i.G||"function"==typeof a.ia&&a.ia());this.K&&(this.i.K||"function"==typeof a.ha&&a.ha());this.P&&(this.i.P||"function"==typeof a.ua&&a.ua());this.O&&(this.i.O||"function"==typeof a.ta&&a.ta());
this.N&&(this.i.N||"function"==typeof a.ba&&a.ba());this.L&&(this.i.L||"function"==typeof a.sa&&a.sa())}}let G=new Ca,H=[];function I(a,b,c=0,d=0){H.push({qa:a,time:b,F:b+d,repeat:c})}function Da(a){for(let b=H.length-1;0<=b;b--){let c=H[b];c.F-=a;0>=c.F&&(c.qa(),0>=c.repeat--?H.splice(b,1):c.F=c.time)}}function Ea(a=0){return"#".repeat(J.i-a)+"%".repeat(3-(J.i-a))}
function Fa(a){a.g={x:0,y:0};let b=`Oh no! ${Ea()}`,c=`Oh no! ${Ea(1)}`;fa([b,c],[g.l],Math.floor(200/(6*b.length)));a.text=b;a.I=0;a.j=!0;J.i--;I(()=>{a.text=c},200,3,500);I(()=>{a.text=b},200,2,600);1>J.i?(I(()=>{a.Y=!0;a.text="you're fired!"},2E3),I(()=>{A(F)},3500)):I(()=>{a.m()},2E3)}function Ga(a){a.g={x:0,y:0};a.I=0;a.text="Nice!";a.j=!0;I(()=>{Ha()},1500)}
function Ia(a){[[Ea(),"left",7],[Math.round(a.F),"center",160],[`Lvl ${J.g+1}`,"right",313]].forEach(([b,c,d])=>{[g.v,g.l].forEach((e,h)=>{t(q,{text:b.toString(),x:d-h,y:7-h,textAlign:c,color:e,size:2})})});a=2*Math.round(50*a.F/a.ma/2);u(q,{x:160-a/2,y:20},{x:a,y:8},g.l,g.C)}
class Ja{constructor(){this.g={x:0,y:0};this.j=this.R=!1;this.X=this.I=0;this.ma=10;this.F=0;this.text="";this.Y=!1}m(){this.F=this.ma;this.Y=this.j=this.R=!1;this.start()}ea(){}start(){this.I=0;this.R=!0}s(a){this.j||this.R||(this.ea(a),this.F=Math.max(0,this.F-a/1E3),0>=Math.round(this.F)&&Fa(this))}oa(a){if(this.j||this.R){this.I+=a;500>=this.I&&(this.X=-(Math.cos(this.I/500*Math.PI)-1)/2);if(0<this.I){a=320*this.X-160;let b=260*this.X-130,c=this.Y?g.l:g.C,d=this.Y?g.C:g.l;u(q,{x:320-a-100+8,y:260-
b-25+8},{x:200,y:50},g.l);u(q,{x:a-100,y:b-25},{x:200,y:50},g.l,c);t(q,{text:this.text,x:320*this.X/2,y:130*this.X,textAlign:"center",textBaseline:"middle",size:Math.floor(200/(6*this.text.length)),color:d})}1E3<this.I&&this.R&&(this.R=!1)}Ia(this)}}
class Ma extends Ja{constructor(){super(...arguments);this.da=4;this.i={x:.3,y:.05};this.ka=7;this.B=0;this.na=100;this.Z=0;this.la=2;this.o=[];this.D=[];this.J=[];this.S=!1}m(){super.m();v.H=!1;v.j=!1;v.h={x:20,y:20};this.g={x:0,y:0}}s(a){!this.j&&this.D.some(b=>b.V().T)&&(v.j=!0,Fa(this));[...this.o,...this.D,...this.J].forEach(b=>{b.update(a)});if(!this.j){this.g={x:k(Math.max(Math.min(this.g.x,this.da),-this.da)),y:k(this.g.y)};v.h=n({x:Math.max(Math.min(v.h.x+this.g.x,304),0),y:Math.max(Math.min(v.h.y+
Math.min(14,this.g.y),520),-260)+1});let b=this.o.find(c=>c.U());!this.j&&this.J.some(c=>{let {T:d,U:e}=c.V();return d||e})&&Ga(this);b?(v.h.y=b.h.y-16,this.Z=this.B=this.g.y=0,this.S=!0):(this.g.y+=this.i.y*a,this.S=!1)}v.j?z(3):0===this.g.x&&0===this.g.y?z(0):0===this.g.y?za(a):0<this.g.y?z(1):0>this.g.y&&z(2);super.s(a)}ea(a){G.G&&this.Z<this.la&&(G.i.G?this.B<this.na&&(this.B+=a,this.g.y=-this.ka):(this.B=0,this.g.y=Math.min(0,this.g.y),this.Z++));this.S&&(G.O?this.g.x-=this.i.x*a:G.P?this.g.x+=
this.i.x*a:0==this.g.y&&(0<this.g.x?this.g.x=Math.max(0,this.g.x-this.i.x*a):0>this.g.x&&(this.g.x=Math.min(0,this.g.x+this.i.x*a))))}}
class K{constructor(a,b){this.M=!1;this.h=a;this.size=b}update(){this.M=!1}V(){var a=v.h.x+v.size.x,b=v.h.y+v.size.y,c=this.h.x+this.size.x,d=this.h.y+this.size.y,e=a>this.h.x,h=v.h.y<d;let l=b>this.h.y;e=v.h.x<c&&e&&h&&l;if(!e)return this.M=!1,{T:!1,U:!1,right:!1,left:!1,bottom:!1,top:!1};c-=v.h.x;a-=this.h.x;d-=v.h.y;b-=this.h.y;h=Math.min(c,a,d,b);this.M=!0;return{T:e,U:this.U(),right:h===c,left:h===a,bottom:h===d,top:h===b}}U(){let a=v.h.x+v.size.x-3,b=v.h.y+v.size.y,c=this.h.y+2;return v.h.x+
5<this.h.x+this.size.x&&a>this.h.x&&v.h.y<c&&b>=this.h.y}}class N extends K{constructor(a,b,c,d){super(a,b);this.fill=this.stroke=g.l;this.stroke=c||"";this.fill=d||this.stroke}update(){u(q,this.h,this.size,this.stroke,this.fill)}}
class O extends N{constructor(a){super(a,{x:130,y:200})}update(){u(q,this.h,this.size,g.u,g.v);[0,50,100,150].forEach(a=>{let [b,c]=[{x:this.h.x-1,y:this.h.y+a},{x:this.size.x+2,y:6}];u(q,b,c,g.u)});for(let a=0;3>a;a++)for(let b=0;5>b;b++)q.g.save(),q.g.translate(this.h.x+8+25*b,this.h.y+14+50*a),u(q,{x:0,y:0},{x:14,y:12},g.u,g.C),u(q,{x:0,y:12},{x:14,y:12},g.u,g.C),q.g.restore()}}
class Na extends Ma{constructor(){super(...arguments);this.g={x:0,y:0};this.da=4;this.i={x:.01,y:.05};this.ka=7;this.B=0;this.na=100;this.Z=0;this.la=2;this.S=!1}m(){super.m();this.text="Jump over";this.o=[new O({x:2,y:116}),new O({x:218,y:136})];this.D=[new K({x:0,y:280},{x:320,y:10})];this.J=[new K({x:218,y:135},{x:130,y:10})]}}let P=new Na;
class Oa extends Ja{constructor(){super(...arguments);this.S=[[-10,-10,10,260],[-10,-10,320,10],[320,-10,10,260],[-10,260,320,10]].map(([a,b,c,d])=>new K({x:a,y:b},{x:c,y:d}));this.i=[]}s(a){super.s(a);this.j||([...this.i,...this.S].forEach(b=>{b=b.V();b.T&&(b.right&&(this.g.x=-this.g.x,v.h.x-=-this.g.x),b.left&&(this.g.x=-this.g.x,v.h.x-=-this.g.x),b.bottom&&(this.g.y=-this.g.y,v.h.y-=-this.g.y),b.top&&(this.g.y=-this.g.y,v.h.y-=-this.g.y))}),xa(this.g.x,this.g.y),this.g={x:k(Math.max(Math.min(this.g.x,
3),-3)),y:k(Math.max(Math.min(this.g.y,3),-3))});0!=this.g.x||0!=this.g.y?za(a):z(0)}ea(a){G.G?this.g.y-=.02*a:G.K?this.g.y+=.02*a:0<this.g.y?this.g.y=Math.max(0,this.g.y-.02*a):0>this.g.y&&(this.g.y=Math.min(0,this.g.y+.02*a));G.O?(this.g.x-=.02*a,v.H=!0):G.P?(this.g.x+=.02*a,v.H=!1):0<this.g.x?this.g.x=Math.max(0,this.g.x-.02*a):0>this.g.x&&(this.g.x=Math.min(0,this.g.x+.02*a))}}function Pa(a){a.text="TY#";a.g=1500}
class Q extends K{constructor(a,b,c={}){super(a,{x:16,y:16});this.ca=this.W=!1;this.text=this.A=null;this.g=0;this.i=b;this.H=!!c.H;this.W=!!c.W;this.ca=!!c.ca}update(a){this.ca&&p(9,{...this.h,y:this.h.y+8});p(this.i,this.h,!1,this.H);this.A&&p(this.A,this.h,!1);0<this.g&&this.text&&(this.g-=a||0,a=this.g/1500,t(q,{text:this.text,x:this.h.x+8,y:this.h.y-10+3*a,size:1,color:.66<a?g.l:.33<a?g.u:g.v,textAlign:"center"}))}}
let Qa=()=>[[8,{x:100,y:101}],[8,{x:132,y:101},!0],[9,{x:116,y:101}],[9,{x:116,y:116}],[8,{x:132,y:116},!0],[8,{x:100,y:116}],[10,{x:100,y:80}],[10,{x:116,y:80}],[10,{x:132,y:80}],[11,{x:200,y:116},!0]].sort((a,b)=>a[1].y-b[1].y);var Ra=[1,5];fa(["TY#"],[g.l,g.u,g.v],1);function Sa(){for(let a=0;20>a;a++)u(q,{x:-1,y:13*a},{x:321,y:13},g.v,g.C);u(q,{x:180,y:20},{x:130,y:220},g.v,g.C)}
class Ta extends Oa{constructor(){super(...arguments);this.J=[];this.B=new Q({x:50,y:195},14,{H:!0,ca:!0});this.o=[];this.D=0}m(){0===this.J.length&&(this.J=Qa());this.text="Bring coffee";this.i=[];this.o=[];var a=J.g/12/2;console.log("difficulty",a);for(this.D=Ra[0]+(Ra[1]-Ra[0])*a;this.o.length<this.D;){let b;for(a=!1;!a;)b={x:16*Math.round(320*(.65*Math.random()+.3)/16),y:16*Math.round(260*(.6*Math.random()+.3)/16)},(a=!this.o.some(c=>c.x===b.x&&c.y===b.y))&&this.o.push(b)}super.m();v.h=n({x:30,
y:30});v.A=[];this.J.forEach(([b,c,d=!1])=>{this.i.push(new Q(c,b,{H:d}))});this.o.forEach((b,c)=>{this.i.push(new Q(b,na[c%na.length],{W:!0}))});this.B.M=!1;this.i.push(this.B)}s(a){Sa();this.i.forEach(b=>{b.update(a);b.W&&b.M&&(!b.A&&0<v.A.length?(b.A=12,Pa(b),v.A.pop(),this.i.some(c=>c.W&&!c.A)||Ga(this)):b.M=!1)});if(this.B.M&&1>v.A.length)for(;v.A.length<this.D;)v.A.push(13);super.s(a)}}let R=new Ta;var Ua=[100,180],Va=[4,2.5],Wa=[.4,.5];
class Xa extends Na{constructor(){super(...arguments);this.$=new K({x:136,y:220},{x:48,y:15})}m(){super.m();this.text="Jump over";let a=J.g/12/2,{pa:b,wa:c,va:d}=ja({pa:Ua[0]+(Ua[1]-Ua[0])*a,wa:Va[0]+(Va[1]-Va[0])*a,va:Wa[0]+(Wa[1]-Wa[0])*a});this.D=[new N({x:0,y:240},{x:320,y:20},g.u)];this.o=[new O({x:-130*d,y:260-b+16}),new O({x:320-130*(1-d),y:260-b+16})];this.J=[new K(this.o[1].h,{x:130,y:1})];this.$=new K({x:160,y:220},{x:16*c,y:15})}s(a){let {T:b,U:c}=this.$.V();if(b||c)this.g.y=-this.g.y;
let d=this.$.h,e=this.$.size;[{h:{x:d.x+3,y:d.y+e.y-1},size:{x:3,y:8}},{h:{x:d.x-6+e.x,y:d.y+e.y-1},size:{x:3,y:8}},{h:d,size:e}].forEach(({h,size:l})=>{u(q,h,l,g.l,g.C)});super.s(a)}}let S=new Xa;class Ya extends Na{m(){super.m();this.text="Land safely";this.D=[new N({x:0,y:240},{x:320,y:20},g.u)];let a=new N({x:218,y:235},{x:32,y:5},g.l,g.C);this.J=[a];this.o=[new O({x:-20,y:66}),a]}}let T=new Ya;var Za=[3,15],$a=[5E3,2E3];
class ab extends Oa{constructor(){super(...arguments);this.progress=0;this.D=5E3;this.o={x:.2,y:.1};this.B=null}m(){super.m();this.progress=0;this.text="Stay in";v.h=n({x:150,y:150});var a=J.g/12/2;let b=Za[0]+(Za[1]-Za[0])*a;this.D=$a[0]+($a[1]-$a[0])*a;a=320*this.o.x;let c=520*this.o.y,d=.6*a,e=.6*c;this.B=new K({x:192+(a-d)/2,y:130-260*this.o.y+(c-e)/2},{x:d,y:e});this.i=[];for(a=0;a<b;a++)this.i.push(new Q({x:16*Math.round(320*Math.random()/16),y:16*Math.round(260*Math.random()/16)},10))}s(a){super.s(a);
this.i.forEach(b=>b.update());this.R||(1<=this.progress?this.j||(this.B?.V().T?Ga(this):Fa(this)):this.progress+=a/this.D,va(Math.pow(this.progress,2),this.o))}}
let U=new ab,bb=[{name:"Assistant Dave",aa:"If you want to make it big in Hollywood kid, you better do as I say!",fa:"Is that all you got?",ja:"I guess you're not totally worthless!",ga:"Stop wasting my time kid!"},{name:"Producer Elena",aa:"Just do as you're told and don't get in my way.",fa:"Hurry, I don't have all day",ja:"Obedient and disciplined. You'll get far, child.",ga:"Is there some reason my coffee isn\t here?"},{name:"Director Alfred",aa:"Good evening. Are you ready to face your fears?",
fa:"Time for your final act",ja:"Well done. I must admit, you handled the tension admirably.",ga:"Was this worth the price of admission?"},{name:"Wally",aa:"I've been following you growth. Show me what you got, ha ha.",fa:"The wheel must keep spinning, ha ha!",ja:"Splendid. I can definitely use you, ha ha!",ga:"This just won't do ha ha"}],cb=[[U,S,R,P,T],[U,R,P,T,S],[U,R,P,T,S],[U,R,P,T,S]];function Ha(){var a=J;a.g++;a.i=3;A(cb[0][a.g]||F)}class db{constructor(){this.g=-1;this.i=3}}
let J=new db,eb=[[6,5,3,3,5,5,0,5,-2,0,-2,0,6,3,2,3],[4,3,5,4,3,5,6,4,3,5,4,3,5,6,4,3],[3,2,3,6,0,-2,0,-2,5,0,5,5,3,3,5,6]],fb=[[2,3,2.5,4],[4,3.5,3,2.5],[4,2.5,3,2]],gb=(a,b)=>c=>Math.sin(60*Math.pow(10,-(c+1)/2048%8))/8+Math.tan(Math.cbrt(Math.sin(c*a[c>>13&15]/30)))/[2,3,4,6,8,12,16,24][c/[1,1.5][c>>12&1]>>10&7]/32+Math.cbrt(Math.asin(Math.sin(c/b[c>>16&3]/10)))/64;
class hb{constructor(){this.source=null;this.i=[];this.g=new AudioContext;for(let a=0;3>a;a++){let b=eb[a%eb.length],c=fb[a%eb.length],d=32E3*(b.length+.4)/2,e=this.g.createBuffer(1,d,32E3),h=e.getChannelData(0);for(let l=0;l<d;l++)h[l]=gb(b,c)(l);this.i.push(e)}}start(){this.g=new AudioContext;this.source=this.g.createBufferSource();this.source.buffer=this.i[J.g];this.source.connect(this.g.destination);this.source.loop=!0;this.source.start()}}
let V,ib=(a,b)=>{var c=1+.5*(Math.random()-.5);let d=new AudioContext;var e=3E3*(a+.25);let h=d.createBuffer(1,e,48E3),l=h.getChannelData(0);for(;e--;){let m=3E3*a;l[e]=e>m?0:Math.sin(c*e/25-.5*Math.sin(e/5))*Math.sin(e/(m/a)*Math.PI)*.2}a=d.createBufferSource();a.buffer=h;a.connect(d.destination);a.start();a.onended=b},W=!1,jb=a=>{W=!0;let b=a.replace(/[^a-zA-Z\s]/g,"").split(" "),c=0,d=0;console.log(b);let e=()=>{if(W&&c<b.length){d=performance.now();let h=Math.floor(b[c].replace(/[^a-zA-Z\s]/g,
"").length/2)||1;ib(h,()=>{let l=performance.now()-d;d=performance.now();console.log(c,h,l,"ms");setTimeout(e,Math.max(60*(h+1)-l,0))});c++}else W=!1};e()},X=0,kb=0,lb="",ia="",mb;
function nb(a){X+=a;30<=X&&(kb++,X-=30);u(q,{x:5,y:190},{x:310,y:50},g.v,g.C);u(q,{x:8,y:193},{x:304,y:44},g.v,g.C);t(q,{text:lb,x:12,y:197,size:2,color:g.u});ha().forEach((b,c)=>{t(q,{text:b,x:12,y:215+8*c,size:1,ra:kb-40*c})});q.g.save();q.g.translate(275,200);q.g.save();q.g.scale(2,2);p(mb,{x:0,y:0});q.g.restore();q.g.restore()}class ob{m(){console.log(0,bb[0]);let {name:a,aa:b}=bb[0];lb=a;ia=b;mb=oa[0];kb=X=0;jb(b)}s(a){sa();nb(a)}ba(){W=!1;Ha()}}let Y=[[" Story mode",80],[" Endless mode",160]];
class pb{constructor(){this.g=0}m(){this.g=0;V&&V?.source?.stop()}s(){t(q,{text:"Levels",x:160,y:30,textAlign:"center",color:g.u,size:3});[...Y,["&",0===this.g?Y[0][1]:Y[1][1]]].forEach(([a,b])=>{t(q,{text:a,x:66,y:b,color:g.l,size:2})});t(q,{text:"Press ENTER to start",x:160,y:240,textAlign:"center",color:g.u,size:1});q.g.save();q.g.translate(76,100);[4,5,6,7].forEach((a,b)=>{q.g.save();q.g.scale(2,2);b={x:21*b,y:0};u(q,b,{x:16,y:16},g.v);p(a,b,!0);q.g.restore()});q.g.restore()}ia(){this.g--;0>this.g&&
(this.g=Y.length-1)}ha(){this.g++;this.g>Y.length-1&&(this.g=0)}ba(){0===this.g&&A(new ob)}}let qb=new pb,rb=["new game","continue","about"],sb=["Optimized for Firefox 2+","Asbestos Free","Not tested on animals","Requires MS-DOS 5.0 or later","For up-to 1 players"],tb="";
class ub{constructor(){this.g=0}m(){V&&V?.source?.stop();tb=sb[Math.floor(Math.random()*sb.length)]}s(){["THIRTEEN","TERRIBLE","STUNTS"].forEach((a,b)=>[g.v,g.l].forEach((c,d)=>t(q,{text:a,x:160-d,y:40+15*b-d,textAlign:"center",color:c,size:2})));rb.forEach((a,b)=>{t(q,{text:a,x:160,y:120+16*b,textAlign:"center",color:b===this.g?g.l:g.u,size:1})});q.g.save();q.g.globalAlpha=.5;q.g.translate(.5,.5);q.g.rotate(-25);q.g.scale(8,8);p(2,{x:3,y:13});q.g.restore();t(q,{text:tb,x:160,y:245,textAlign:"center",
color:g.v,size:1})}ia(){this.g--;0>this.g&&(this.g=rb.length-1)}ha(){this.g++;this.g>rb.length-1&&(this.g=0)}ba(){0===this.g&&(J.g=-1,A(qb))}}let F=new ub;document.querySelector('link[type="image/x-icon"]').href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ctext y='.9em' font-size='90'%3E\ud83c\udf9e%3C/text%3E%3C/svg%3E";E=new Ba(...[]);let vb=0,Z=[];V=new hb;
function wb(a){let b=a-vb;vb=a;Z.push(1E3/b);15===Z.length&&(fps.innerHTML=`${Math.round(Z.reduce((c,d)=>c+d)/15)} FPS`,Z=[]);ra();a=E.g;G.s(a);a.s(b);a.oa&&a.oa(b);Da(b);requestAnimationFrame(wb)}requestAnimationFrame(wb);
