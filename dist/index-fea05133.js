function f(a){var b=g,c=[];b.g=a;b.g.l?.(...c)}class aa{constructor(...a){this.g=h;this.g.l?.(...a)}}
let g,ca=a=>a.replace(/^#?([a-f\d])([a-f\d])([a-f\d])([a-f\d])$/i,(b,c,d,e,k)=>"#"+c+c+d+d+e+e+k+k).substring(1).match(/.{2}/g).map(b=>parseInt(b,16)),da="6v7ic 2rwzo 6nvic 58jgo 55eyo jz6bo   34ao 7k b28 m0 20o0o 9a7vy jbmjj jf63j ivhmn etrs7 ju8e7 jalrz jeyks jwdj3 jwdlv 2t8g 2t8s 34yo lskg m2yo jf4lo jysjy 98ruh j8htq 9v7zj j8d32 ju78f ju8t4 9ul2n g44e1 jykrj jewdq g4rbt fgsgv hha5t g6xgz 98rou j8d7c 98uwe j8d7d 9xgxq jykqs g3zn2 g3z9g b1ipn h4qu3 c8oz2 jhyfz    ".split(" "),n={},ea=async(a,b,
c)=>{let d=a+c+b;if(!n[d]){var e=5*b,k=1*b,l=e+k,m=l*a.length-k,r=new ImageData(m,e),[w,y,z,D]=ca(c);a.replace("!","@").toUpperCase().split("").forEach((E,Ra)=>{String(parseInt(" "===E?"0":da[E.charCodeAt(0)-35],36).toString(2)).padStart(25,"0").split("").forEach((F,Sa)=>{if("0"!==F)for(F=0;F<b;F++){var M=Sa*b;M=4*(Ra*l+M%e+b*m*Math.floor(M/e)+m*F);for(let ba=0;ba<b;ba++){let N=4*ba+M;r.data[N]=w;r.data[N+1]=y;r.data[N+2]=z;r.data[N+3]=D||255}}})});a=await createImageBitmap(r);n[d]=a}},fa=(a,{text:b,
color:c=p.m,textAlign:d="left",textBaseline:e="top",size:k=2,ua:l=999,...m})=>{let r=Math.round(m.x),w=Math.round(m.y);b||=" ";let y=5*k;var z=1*k;m=y+z;z=m*b.length-z;let D=b+c+k,E="left"===d?0:"center"===d?Math.round(z/2):z;d="top"===e?0:"middle"===e?Math.round(y/2):y;n[D]?(b=l*m,a.drawImage(n[D],0,0,b,m,r-E,w-d,b,m)):ea(b,k,c).then(()=>{a.drawImage(n[D],r-E,w)})},ha=(a,b,c)=>{a.forEach(d=>{b.forEach(e=>ea(d,c,e))})};function q(a){return.1>a&&-.1<a?0:a}
function ia(){var a=ja;let b=RegExp("(.{1,40})(\\s|$)","g"),c=[],d;for(;null!==(d=b.exec(a));)c.push(d[1].trim());return c}function ka(a){return{x:Math.round(a.x),y:Math.round(a.y)}}function la(a){let b={...a};Object.keys(b).forEach(c=>{b[c]*=1+.3*Math.random()});return b}let t=(a,b)=>({x:a.x+b,y:a.y+62}),p={m:"#1F0A00",D:"#FFFCEA",A:"#A29782",B:"#CEC6AD"},ma=Object.values(p).join("").replace(/#/g,"");p.m.repeat(4);
let na="@@@@@@PUUE@PjjjA@ijjF@dZjY@PjjjA@iZeF@djjZ@PUUUAPijjFPdjjZQPUUUQ@TUUA@PA@E@@E@T@@T@PA@ @@@@@@@@@@@@@@@@@TUUA@djjZ@PjjjA@ijjF@dZjY@PjjjA@iZeF@TUUU@TjjjEDijjFQTUUUD@UUU@@@EPA@ @TUUA@djjZ@PjifA@ijjF@djUZ@PjjjQ@ijjFATUUUATjjjADiejFPTUUU@@UUU@@PAU@@@@U@@@@T@@@@@@@@ @@@@@@@@@@@@@@@@@@@@@@@@@@@PUUUA@YijZ@eejjFUVjjZEYiZfEdfffFPZZfYUiiijUUUUUE@D@@@@@U@@@ @@@@@@@UUE@@UUUA@ijjU@dfZZAPjYjE@iifV@ifZZAdjjjFPjUeZ@iZUjAPjjjA@TejU@UijUEUUjUUTUUUUA @@@@@@PUUE@PeZUAPijjU@ijjVAeUVYUTjifVQijjZEejjjUPjUjVAijjZ@PjjZ@@TiU@@@dF@@PUVUAPUUUU@ @TUU@@djjF@djjjAPUUUF@ijjV@djjjAPVjeF@ijjZ@djjjAPjUjF@djjF@@ejF@@@iF@@TeZU@TUYUEPUUUU@ @PA@E@PU@UAPUUUU@UiVUAPijUA@djZA@PfiF@@YfZ@@djjATdjjFPejjZ@djjZ@@UUU@@@@U@@@@UE@@PUUE@ p\u007f@@@@kC@@@lN@@@pz@@@@k\u007f\u007f\u007f@|njjCp~jjN@kkjz@lnjjCpzjjN@k\u007f\u007f\u007f@ljjjCpjjjN@k\u007f\u007fz@l~\u007fkCp\u007f@|O@ @\u007f\u007f\u007fC@kjjz@kjjjNkjjjjojjjj~jjjjzkjjjjojjjj~kjjj~{jjjns~\u007f\u007foCljjjCp\u007f\u007f\u007fO@kCpz@lN@kCp\u007f@|O@ @p\u007fO@@|jjO@ljzjCpjznNpjjnjCknjjNlnkjzpjkzjskjzn~ojjnzokjjz~z\u007f\u007f\u007fzkjjjj\u007f\u007f\u007f\u007f\u007f\u007fjjjjz|\u007f\u007f\u007f\u007f@ @pOpO@pjsjC@kNkNLlzozpC\u007fj\u007f@{sjz@l~kjCpzojN@{s\u007f\u007f@|@pN@p@pjC@@p~{@@pNpN@pN@lCpN@@{@O@@pC @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@|C@@@pW@@@@\u007fC@@@|K@@@@J@@@@@@@@@@@@@@@@@ @@@@@@@@@@@@TUE@@djjA@d~\u007fZ@T^UmAdZUUFPfVUZ@YjjjEtjjjfQujj^Fi}\u007f_ZPZUUZ@djjZ@@UUU@@@@@@@ PUUUU@ijjjAdjjjFPjjjZ@UUUUAt\u007f\u007f\u007fGPUUu^@@@P\u007fAPUEmGPTVt_@QYQ\u007fADeE}G@TUt_@UUU\u007fAt\u007f\u007f\u007fGPUUUU@ @@\u007fC@@pkzC@pz\u007fz@p~\u007f\u007fNp~\u007f\u007foC{\u007f\u007f\u007fN{\u007f\u007f\u007foo\u007f\u007f\u007f\u007f~~\u007f\u007f\u007f{{\u007f\u007f\u007fos~\u007f\u007foC{\u007f\u007f\u007fNp~\u007f\u007fN@l~oN@@ojO@@@\u007fC@@ @@@@@@TUUA@TejZATUffEPUYZV@UejZAPeZiA@djjF@PUUU@PijjEPdjjFAQjjZDPUUUE@PAPA@@E@E@@@@@@@ @@@@@@PUUA@PjjZ@@ijjA@dZZF@PjiY@@iZiA@djjF@PUUU@PiZiEPdjjFAQUUUDPUUUE@PAPA@@E@E@@@@@@@ @@@@@@PUUA@PUUU@@ijjA@TUUE@PZiU@@ijjA@djjF@PUUU@PUUVEPTUYEAQUUUDPUUUE@PAPA@@E@E@@@@@@@ @@@@@@PUUE@PjjjA@ijjF@dZjY@PjjjA@iZeF@djjZ@PUUUAPijjFPdjjZQPUUUQ@TUUA@PA@E@@@@T@@@@PA@ @@@@@@PUUE@PjjjA@ijjF@dZjY@PjjjA@iZeF@djjZ@PUUUAPijjFPdjjZQPUUUQ@TUUA@@E@E@@T@T@@@@PA@ @@@@@@PUUE@PjjjA@ijjF@dZjY@PjjjA@iZeF@djjZ@PUUUAPijjFPdjjZQPUUUQ@TUUA@@EPA@@T@E@@PA@@@ @@@@@@PUUE@PjjjA@ijjF@dZjY@PjjjA@iZeF@djjZ@PUUUAPijjFPdjjZQPUUUQ@TUUA@@EPA@@T@@@@PA@@@ @@@@@@PUUE@PjjjA@ijjF@dZjY@PjjjA@iZeF@djjZ@PUUUAPijjFPdjjZQPUUUQ@TUUA@@E@E@@T@T@@PA@@@ @@@@@@PUUE@PjjjA@ijjF@dZjY@PjjjA@iZeF@djjZ@PUUUAPijjFPdjjZQPUUUQ@TUUA@@E@E@@T@T@@@@PA@".split(" "),oa=
[],pa=[],qa=[],ra=[];async function sa(a,b){let c=[];[...b].map(k=>{k=k.charCodeAt(0);c.push(k&3);c.push(k>>2&3);c.push(k>>4&3)});b=Math.floor(Math.sqrt(c.length));let d=new ImageData(b,b);for(let k=0;k<b;k++)for(let l=0;l<b;l++)if(c[k*b+l]){var e=6*(c[k*b+l]-1);let [m,r,w,y]=ca("#"+ma.substring(e,e+6));e=4*(l+k*b);d.data[e]=m;d.data[e+1]=r;d.data[e+2]=w;d.data[e+3]=y||255}b=await createImageBitmap(d);oa[a]=b}
function u(a,b,c=!1,d=!1){var e=v;if(a=oa[a])e.g.save(),c&&(e.g.filter="brightness(0)"),e.g.translate(b.x+(d?a.width:0),b.y),e.g.save(),e.g.scale(d?-1:1,1),e.g.drawImage(a,0,0),e.g.restore(),e.g.restore()}function x(a,b){fa(a.g,b)}function ta(){var a=v;a.g.clearRect(0,0,320,260);a.g.fillStyle=p.D;a.g.fillRect(0,0,320,260)}function A(a,b,c,d,e){let {x:k,y:l}=ka(b);a.g.fillStyle=d;a.g.fillRect(k,l,c.x,c.y);a.g.fillStyle=e||d;a.g.fillRect(k+1,l+1,c.x-2,c.y-2)}
function ua(a,b,c,d,e){var k=p.A;b=Math.round(b);c=Math.round(c);d=Math.round(d);e=Math.round(e);d-=b;e-=c;let l=Math.max(Math.abs(d),Math.abs(e));d/=l;e/=l;let m=[];for(a.g.fillStyle=k;l--;)m.push([b,c]),b+=d,c+=e;a.g.beginPath();m.map(([r,w])=>{a.g.rect(Math.round(r),Math.round(w),3,3)});a.g.fill()}
function va(){var a=v;a.g.save();a.g.translate(80,80);[{x:12,y:0},{x:0,y:12},{x:12,y:12},{x:24,y:12}].forEach(({x:b,y:c})=>{A(a,{x:b,y:c},{x:10,y:10},p.A,p.B)});x(a,{text:"move",x:18,y:30,textAlign:"center",size:2});a.g.restore();a.g.save();a.g.translate(200,70);[{text:"enter",y:0},{text:"or",y:12},{text:"space",y:24}].forEach(({text:b,y:c})=>{"or"!==b&&A(a,{x:0,y:c},{x:40,y:10},p.A,p.B);x(a,{text:b,x:20,y:c+3,size:1,textAlign:"center"})});x(a,{text:"action",x:20,y:40,textAlign:"center",size:2});
a.g.restore()}function wa(a,b,c){a.g.save();a.g.globalAlpha=.5;a.g.transform(c,-1+c,0,1,0,0);a.g.beginPath();a.g.moveTo(0,260);b.forEach(([d,e])=>{a.g.lineTo(320*d,260*e)});a.g.fillStyle=p.m;a.g.clip();a.g.fillRect(0,0,320,260);a.g.restore()}
function xa(a,b,c){a.g.save();a.g.transform(Math.pow(c,3),.5*(-1+c),0,1,0,0);a.g.beginPath();a.g.moveTo(0,260);b.forEach(([d,e])=>{a.g.lineTo(320*d,260*e)});a.g.fillStyle=p.D;a.g.strokeStyle=p.B;a.g.stroke();a.g.clip();b=Math.round(320/30);a.g.fillRect(0,0,320,260);for(c=0;30>c;c++)a.g.strokeRect(b*c,0,b,260);a.g.restore()}function ya(a,b){var c=v;b=[[0,0],[.5,0],[1,.5],[.8,.5],[.8,.5-b.y],[1-(.2+b.x),.5-b.y],[1-(.2+b.x),.5+b.y],[.8,.5+b.y],[.8,.5],[1,.5],[.5,1],[0,1]];wa(c,b,a);xa(c,b,a)}
function za(a){var b=v,c=2*Math.PI/8;for(let d=0;8>d;d++){let e=c*(d+8*a);b.g.save();b.g.translate(160,130);ua(b,40*Math.cos(e),40*Math.sin(e),40*Math.cos(e+c),40*Math.sin(e+c));ua(b,0,0,80*Math.cos(e),80*Math.sin(e));b.g.restore()}c=150+5*Math.sin(2*Math.PI*a);a=150+5*Math.cos(2*Math.PI*a);ua(b,0,c,320,a);b.g.beginPath;b.g.moveTo(0,c);b.g.lineTo(320,a);b.g.lineTo(320,260);b.g.lineTo(0,260);b.g.lineTo(0,c);b.g.fill()}
class Aa{constructor(){this.g=c2d.getContext("2d",{alpha:!1});this.g.imageSmoothingEnabled=!1;let a=performance.now();Promise.all(na.map((b,c)=>sa(c,b))).then(()=>{console.debug(`Loaded icons in ${performance.now()-a}ms`);pa=[16,17,18];qa=[4,5,6,7];ra=[19,20,21,22,23,24]})}}let v=new Aa;function B(a,b,c){a.h=ka({x:b,y:c})}function Ba(a,b){var c=C;B(c,c.h.x+a,c.h.y+b)}function Ca(a){a.F.forEach((b,c)=>{u(b,{...a.h,y:a.h.y-12*(c+1)})})}function G(a){var b=C;u(a,b.h,!1,b.G);Ca(b)}
function Da(a){var b=C;b.i+=a;60<=b.i&&(b.j=(b.j+1)%6,b.i-=60);u(ra[b.j],b.h,!1,b.G);Ca(b)}class Ea{constructor(){this.j=this.i=0;this.size={x:16,y:16};this.h={x:0,y:0};this.G=!1;this.F=[];this.g=!1}}let C=new Ea,H=[];function I(a,b,c=0,d=0){H.push({ta:a,time:b,H:b+d,repeat:c})}function Fa(a){for(let b=H.length-1;0<=b;b--){let c=H[b];c.H-=a;0>=c.H&&(c.ta(),0>=c.repeat--?H.splice(b,1):c.H=c.time)}}function Ga(a=0){return"#".repeat(J.i-a)+"%".repeat(3-(J.i-a))}
function K(a){a.g={x:0,y:0};let b=`Oh no! ${Ga()}`,c=`Oh no! ${Ga(1)}`;ha([b,c],[p.m],Math.floor(200/(6*b.length)));a.text=b;a.K=0;a.i=!0;J.i--;I(()=>{a.text=c},200,3,500);I(()=>{a.text=b},200,2,600);1>J.i?(I(()=>{a.ba=!0;a.text="you're fired!"},2E3),I(()=>{f(h)},3500)):I(()=>{a.l()},2E3)}function Ha(a){a.g={x:0,y:0};a.K=0;a.text="Nice!";a.i=!0;I(()=>{Ia()},1500)}
function Ja(a){[[Ga(),"left",7],[Math.round(a.H),"center",160],[`Lvl ${J.g+1}`,"right",313]].forEach(([b,c,d])=>{[p.B,p.m].forEach((e,k)=>{x(v,{text:b.toString(),x:d-k,y:7-k,textAlign:c,color:e,size:2})})});a=2*Math.round(50*a.H/a.na/2);A(v,{x:160-a/2,y:20},{x:a,y:8},p.m,p.D)}
class Ka{constructor(){this.g={x:0,y:0};this.i=this.j=!1;this.W=this.K=0;this.na=10;this.H=0;this.text="";this.ba=!1}l(){this.H=this.na;this.ba=this.i=this.j=!1;this.start()}ga(){}start(){this.K=0;this.j=!0}v(a){this.i||this.j||(this.ga(a),this.H=Math.max(0,this.H-a/1E3),0>=Math.round(this.H)&&K(this))}ra(a){if(this.i||this.j){this.K+=a;500>=this.K&&(this.W=-(Math.cos(this.K/500*Math.PI)-1)/2);if(0<this.K){a=320*this.W-160;let b=260*this.W-130,c=this.ba?p.m:p.D,d=this.ba?p.D:p.m;A(v,{x:320-a-100+
8,y:260-b-25+8},{x:200,y:50},p.m);A(v,{x:a-100,y:b-25},{x:200,y:50},p.m,c);x(v,{text:this.text,x:320*this.W/2,y:130*this.W,textAlign:"center",textBaseline:"middle",size:Math.floor(200/(6*this.text.length)),color:d})}1E3<this.K&&this.j&&(this.j=!1)}Ja(this)}}
class La extends Ka{constructor(){super(...arguments);this.u={x:.3,y:.05};this.la=7;this.ma=14;this.fa=this.X=0;this.o=[];this.J=[];this.C=[];this.ea=!1}l(){super.l();C.G=!1;C.g=!1;C.h={x:20,y:20};this.g={x:0,y:0}}v(a){!this.i&&this.J.some(b=>b.Y().U)&&(C.g=!0,K(this));[...this.o,...this.J,...this.C].forEach(b=>{b.update(a)});if(!this.i){this.g={x:q(Math.max(Math.min(this.g.x,4),-4)),y:q(this.g.y)};B(C,Math.max(Math.min(C.h.x+this.g.x,304),0),Math.max(Math.min(C.h.y+Math.min(this.ma,this.g.y),520),
-260)+1);let b=this.o.find(c=>c.V());!this.i&&this.C.some(c=>{let {U:d,V:e}=c.Y();return d||e})&&Ha(this);b?(C.h.y=b.h.y-16,this.fa=this.X=this.g.y=0,this.ea=!0):(this.g.y+=this.u.y*a,this.ea=!1)}this.oa(a);super.v(a)}oa(a){C.g?G(3):0===this.g.x&&0===this.g.y?G(0):0===this.g.y?Da(a):0<this.g.y?G(1):0>this.g.y&&G(2)}ga(a){L.I&&2>this.fa&&(L.i.I?100>this.X&&(this.X+=a,this.g.y=-this.la):(this.X=0,this.g.y=Math.min(0,this.g.y),this.fa++));this.ea&&(L.R?this.g.x-=this.u.x*a:L.S?this.g.x+=this.u.x*a:0==
this.g.y&&(0<this.g.x?this.g.x=Math.max(0,this.g.x-this.u.x*a):0>this.g.x&&(this.g.x=Math.min(0,this.g.x+this.u.x*a))))}}
class O{constructor(a,b){this.O=!1;this.h=a;this.size=b}update(){this.O=!1}Y(){var a=C.h.x+C.size.x,b=C.h.y+C.size.y,c=this.h.x+this.size.x,d=this.h.y+this.size.y,e=a>this.h.x,k=C.h.y<d;let l=b>this.h.y;e=C.h.x<c&&e&&k&&l;if(!e)return this.O=!1,{U:!1,V:!1,right:!1,left:!1,bottom:!1,top:!1};c-=C.h.x;a-=this.h.x;d-=C.h.y;b-=this.h.y;k=Math.min(c,a,d,b);this.O=!0;return{U:e,V:this.V(),right:k===c,left:k===a,bottom:k===d,top:k===b}}V(){let a=C.h.x+C.size.x-3,b=C.h.y+C.size.y,c=this.h.y+2;return C.h.x+
5<this.h.x+this.size.x&&a>this.h.x&&C.h.y<c&&b>=this.h.y}ka(a,b){A(v,this.h,this.size,b||a,a)}}class P extends O{constructor(a,b,c,d){super(a,b);this.fill=this.stroke=p.m;this.stroke=c||"";this.fill=d||this.stroke}update(){A(v,this.h,this.size,this.stroke,this.fill)}}
class Q extends P{constructor(a){super(a,{x:130,y:200})}update(){A(v,this.h,this.size,p.A,p.B);[0,50,100,150].forEach(a=>{let [b,c]=[{x:this.h.x-1,y:this.h.y+a},{x:this.size.x+2,y:6}];A(v,b,c,p.A)});for(let a=0;3>a;a++)for(let b=0;5>b;b++)v.g.save(),v.g.translate(this.h.x+8+25*b,this.h.y+14+50*a),A(v,{x:0,y:0},{x:14,y:12},p.A,p.D),A(v,{x:0,y:12},{x:14,y:12},p.A,p.D),v.g.restore()}}
let Ma=class extends La{constructor(){super(...arguments);this.u={x:.01,y:.05}}l(){super.l();this.text="Jump over";this.o=[new Q({x:2,y:116}),new Q({x:218,y:136})];this.J=[new O({x:0,y:280},{x:320,y:10})];this.C=[new O({x:218,y:135},{x:130,y:10})]}},R=new Ma;
class Na extends Ka{constructor(){super(...arguments);this.N=[[-10,-10,10,260],[-10,-10,320,10],[320,-10,10,260],[-10,260,320,10]].map(([a,b,c,d])=>new O({x:a,y:b},{x:c,y:d}));this.o=[]}v(a){super.v(a);this.i||([...this.o,...this.N].forEach(b=>{b=b.Y();b.U&&(b.right&&(this.g.x=-this.g.x,C.h.x-=-this.g.x),b.left&&(this.g.x=-this.g.x,C.h.x-=-this.g.x),b.bottom&&(this.g.y=-this.g.y,C.h.y-=-this.g.y),b.top&&(this.g.y=-this.g.y,C.h.y-=-this.g.y))}),Ba(this.g.x,this.g.y),this.g={x:q(Math.max(Math.min(this.g.x,
3),-3)),y:q(Math.max(Math.min(this.g.y,3),-3))});0!=this.g.x||0!=this.g.y?Da(a):G(0)}ga(a){L.I?this.g.y-=.02*a:L.L?this.g.y+=.02*a:0<this.g.y?this.g.y=Math.max(0,this.g.y-.02*a):0>this.g.y&&(this.g.y=Math.min(0,this.g.y+.02*a));L.R?(this.g.x-=.02*a,C.G=!0):L.S?(this.g.x+=.02*a,C.G=!1):0<this.g.x?this.g.x=Math.max(0,this.g.x-.02*a):0>this.g.x&&(this.g.x=Math.min(0,this.g.x+.02*a))}}function Oa(a){a.text="TY#";a.g=1500}
class S extends O{constructor(a,b,c={}){super(a,{x:16,y:16});this.da=this.Z=!1;this.text=this.F=null;this.g=0;this.i=b;this.G=!!c.G;this.Z=!!c.Z;this.da=!!c.da}update(a){this.da&&u(9,{...this.h,y:this.h.y+8});u(this.i,this.h,!1,this.G);this.F&&u(this.F,this.h,!1);0<this.g&&this.text&&(this.g-=a||0,a=this.g/1500,x(v,{text:this.text,x:this.h.x+8,y:this.h.y-10+3*a,size:1,color:.66<a?p.m:.33<a?p.A:p.B,textAlign:"center"}))}}
let Pa=()=>[[8,{x:100,y:101}],[8,{x:132,y:101},!0],[9,{x:116,y:101}],[9,{x:116,y:116}],[8,{x:132,y:116},!0],[8,{x:100,y:116}],[10,{x:100,y:80}],[10,{x:116,y:80}],[10,{x:132,y:80}],[11,{x:200,y:116},!0]].sort((a,b)=>a[1].y-b[1].y);var Qa=[1,5];ha(["TY#"],[p.m,p.A,p.B],1);
class Ta extends Na{constructor(){super(...arguments);this.J=[];this.s=new S({x:50,y:195},14,{G:!0,da:!0});this.u=[];this.C=0}l(){0===this.J.length&&(this.J=Pa());this.text="Bring coffee";this.o=[];this.u=[];var a=J.g/12/2;console.log("difficulty",a);for(this.C=Qa[0]+(Qa[1]-Qa[0])*a;this.u.length<this.C;){let b;for(a=!1;!a;)b={x:16*Math.round(320*(.4*Math.random()+.6)/16),y:16*Math.round(260*(.6*Math.random()+.3)/16)},(a=!this.u.some(c=>c.x===b.x&&c.y===b.y))&&this.u.push(b)}super.l();B(C,30,30);
C.F=[];this.J.forEach(([b,c,d=!1])=>{this.o.push(new S(c,b,{G:d}))});this.u.forEach((b,c)=>{this.o.push(new S(b,pa[c%pa.length],{Z:!0}))});this.s.O=!1;this.o.push(this.s)}v(a){this.ka();this.o.forEach(b=>{b.update(a);b.Z&&b.O&&(!b.F&&0<C.F.length?(b.F=12,Oa(b),C.F.pop(),this.o.some(c=>c.Z&&!c.F)||Ha(this)):b.O=!1)});if(this.s.O&&1>C.F.length)for(;C.F.length<this.C;)C.F.push(13);super.v(a)}ka(){for(let a=0;20>a;a++)A(v,{x:-1,y:13*a},{x:321,y:13},p.B,p.D);A(v,{x:180,y:20},{x:130,y:220},p.B,p.D)}}
let T=new Ta;var Ua=[100,180],Va=[4,2.5],Wa=[.4,.5];
class Xa extends Ma{constructor(){super(...arguments);this.s=new O({x:136,y:220},{x:48,y:15})}l(){super.l();this.text="Jump over";let a=J.g/12/2,{sa:b,za:c,ya:d}=la({sa:Ua[0]+(Ua[1]-Ua[0])*a,za:Va[0]+(Va[1]-Va[0])*a,ya:Wa[0]+(Wa[1]-Wa[0])*a});this.J=[new P({x:0,y:240},{x:320,y:20},p.A)];this.o=[new Q({x:-130*d,y:260-b+16}),new Q({x:320-130*(1-d),y:260-b+16})];this.C=[new O(this.o[1].h,{x:130,y:1})];this.s=new O({x:160,y:220},{x:16*c,y:15})}v(a){let {U:b,V:c}=this.s.Y();if(b||c)this.g.y=-this.g.y;
let d=this.s.h,e=this.s.size;[{h:{x:d.x+3,y:d.y+e.y-1},size:{x:3,y:8}},{h:{x:d.x-6+e.x,y:d.y+e.y-1},size:{x:3,y:8}},{h:d,size:e}].forEach(({h:k,size:l})=>{A(v,k,l,p.m,p.D)});super.v(a)}}let U=new Xa;class Ya extends Ma{l(){super.l();this.text="Land safely";this.J=[new P({x:0,y:240},{x:320,y:20},p.A)];let a=new P({x:218,y:235},{x:32,y:5},p.m,p.D);this.C=[a];this.o=[new Q({x:-20,y:66}),a]}}let V=new Ya;var Za=[3,15],$a=[5E3,2E3];
class ab extends Na{constructor(){super(...arguments);this.progress=0;this.C=5E3;this.u={x:.2,y:.1};this.s=null}l(){super.l();this.progress=0;this.text="Stay in";B(C,150,150);var a=J.g/12/2;let b=Za[0]+(Za[1]-Za[0])*a;this.C=$a[0]+($a[1]-$a[0])*a;a=320*this.u.x;let c=520*this.u.y,d=.6*a,e=.6*c;this.s=new O({x:192+(a-d)/2,y:130-260*this.u.y+(c-e)/2},{x:d,y:e});this.o=[];for(a=0;a<b;a++)this.o.push(new S({x:16*Math.round(320*Math.random()/16),y:16*Math.round(260*Math.random()/16)},10))}v(a){super.v(a);
this.o.forEach(b=>b.update());this.j||(1<=this.progress?this.i||(this.s?.Y().U?Ha(this):K(this)):this.progress+=a/this.C,ya(Math.pow(this.progress,2),this.u))}}let W=new ab;
class bb extends La{constructor(){super(...arguments);this.u={x:.05,y:.05};this.la=6;this.ma=7}l(){super.l();this.text="Land safely";this.o=[];for(let a=0;4>a;a++)this.o.push(new P({x:235*a,y:150},{x:210,y:70},p.A,p.B));this.J=[new O({x:0,y:250},{x:320,y:10})];this.C=[new O({x:218,y:230},{x:48,y:10})];C.h={x:20,y:70}}v(a){A(v,{x:0,y:225},{x:320,y:35},p.A);this.C[0].ka(p.D,p.m);super.v(a);this.j||this.i||(C.h.x-=this.u.x*a);this.o.forEach(b=>{this.j||(b.h.x-=150*a/1E3);u(15,t(b.h,16));u(15,t(b.h,48));
u(15,t(b.h,194));u(15,t(b.h,162))})}oa(a){C.g?G(3):this.i?G(0):Da(a)}}let cb=new bb;function db(a){a=(a.s-a.aa/8)%1*2*Math.PI;B(C,160+56*Math.cos(a)-8,130+56*Math.sin(a)-16)}
class eb extends La{constructor(){super(...arguments);this.s=0;this.aa=-7;this.N=this.T=!1}l(){super.l();this.text="Stay dry";C.G=!0;this.aa=-7;this.s=0;this.N=this.T=!1;db(this)}v(a){if(!this.j&&(this.s+=a/4E3,1<=this.s&&--this.s,!this.T&&!this.N)){let b=this.s-this.aa%8/8;.7>=b&&.07<=b?(this.T=.5<b,this.N=!this.T,console.log(this.T,this.N),I(()=>K(this),500)):db(this)}this.N?(C.h.y+=.04*a,C.h.x-=.2*a):this.T&&(C.h.x-=.04*a,C.h.y+=.2*a,156<C.h.y&&(this.N=!0));za(this.s);G(C.g?3:0)}$(){this.j||this.i||
this.aa++}}
let fb=[{name:"Assistant Dave",ca:"If you want to make it big in Hollywood kid, you better do as I say!",ha:"Is that all you got?",ja:"I guess you're not totally worthless!",ia:"Stop wasting my time kid!"},{name:"Producer Elena",ca:"Just do as you're told and don't get in my way.",ha:"Hurry, I don't have all day",ja:"Obedient and disciplined. You'll get far, child.",ia:"Is there some reason my coffee isn\t here?"},{name:"Director Alfred",ca:"Good evening. Are you ready to face your fears?",ha:"Time for your final act",
ja:"Well done. I must admit, you handled the tension admirably.",ia:"Was this worth the price of admission?"},{name:"Wally",ca:"I've been following you growth. Show me what you got, ha ha.",ha:"The wheel must keep spinning, ha ha!",ja:"Splendid. I can definitely use you, ha ha!",ia:"This just won't do ha ha"}],gb=[[new eb,T,W,U,R,V,cb],[W,T,R,V,U],[W,T,R,V,U],[W,T,R,V,U]];function Ia(){var a=J;a.g++;a.i=3;(a=gb[0][a.g])||(a=gb[0][Math.round(Math.random()*(gb.length-1))]);f(a)}
class hb{constructor(){this.g=-1;this.i=3}}let J=new hb,ib=[[6,5,3,3,5,5,0,5,-2,0,-2,0,6,3,2,3],[4,3,5,4,3,5,6,4,3,5,4,3,5,6,4,3],[3,2,3,6,0,-2,0,-2,5,0,5,5,3,3,5,6]],jb=[[2,3,2.5,4],[4,3.5,3,2.5],[4,2.5,3,2]],kb=(a,b)=>c=>Math.sin(60*Math.pow(10,-(c+1)/2048%8))/8+Math.tan(Math.cbrt(Math.sin(c*a[c>>13&15]/30)))/[2,3,4,6,8,12,16,24][c/[1,1.5][c>>12&1]>>10&7]/32+Math.cbrt(Math.asin(Math.sin(c/b[c>>16&3]/10)))/64;
class lb{constructor(){this.source=null;this.i=[];this.g=new AudioContext;for(let a=0;3>a;a++){let b=ib[a%ib.length],c=jb[a%ib.length],d=32E3*(b.length+.4)/2,e=this.g.createBuffer(1,d,32E3),k=e.getChannelData(0);for(let l=0;l<d;l++)k[l]=kb(b,c)(l);this.i.push(e)}}start(){this.g=new AudioContext;this.source=this.g.createBufferSource();this.source.buffer=this.i[J.g];this.source.connect(this.g.destination);this.source.loop=!0;this.source.start()}}
let X,mb=(a,b)=>{var c=1+.5*(Math.random()-.5);let d=new AudioContext;var e=3E3*(a+.25);let k=d.createBuffer(1,e,48E3),l=k.getChannelData(0);for(;e--;){let m=3E3*a;l[e]=e>m?0:Math.sin(c*e/25-.5*Math.sin(e/5))*Math.sin(e/(m/a)*Math.PI)*.2}a=d.createBufferSource();a.buffer=k;a.connect(d.destination);a.start();a.onended=b},Y=!1,nb=a=>{Y=!0;let b=a.replace(/[^a-zA-Z\s]/g,"").split(" "),c=0,d=0;console.log(b);let e=()=>{if(Y&&c<b.length){d=performance.now();let k=Math.floor(b[c].replace(/[^a-zA-Z\s]/g,
"").length/2)||1;mb(k,()=>{let l=performance.now()-d;d=performance.now();console.log(c,k,l,"ms");setTimeout(e,Math.max(60*(k+1)-l,0))});c++}else Y=!1};e()},Z=0,ob=0,pb="",ja="",qb;
function rb(a){Z+=a;30<=Z&&(ob++,Z-=30);A(v,{x:5,y:190},{x:310,y:50},p.B,p.D);A(v,{x:8,y:193},{x:304,y:44},p.B,p.D);x(v,{text:pb,x:12,y:197,size:2,color:p.A});ia().forEach((b,c)=>{x(v,{text:b,x:12,y:215+8*c,size:1,ua:ob-40*c})});v.g.save();v.g.translate(275,200);v.g.save();v.g.scale(2,2);u(qb,{x:0,y:0});v.g.restore();v.g.restore()}class sb{l(){console.log(0,fb[0]);let {name:a,ca:b}=fb[0];pb=a;ja=b;qb=qa[0];ob=Z=0;nb(b)}v(a){va();rb(a)}$(){Y=!1;Ia()}}
let tb=[[" Story mode /soon/",80],[" Endless mode",160]];
class ub{constructor(){this.g=0}l(){this.g=1;X&&X?.source?.stop()}v(){x(v,{text:"Levels",x:160,y:30,textAlign:"center",color:p.A,size:3});[...tb,["&",0===this.g?tb[0][1]:tb[1][1]]].forEach(([a,b])=>{x(v,{text:a,x:66,y:b,color:p.m,size:2})});x(v,{text:"Press ENTER to start",x:160,y:240,textAlign:"center",color:p.A,size:1});v.g.save();v.g.translate(76,100);[4,5,6,7].forEach((a,b)=>{v.g.save();v.g.scale(2,2);b={x:21*b,y:0};A(v,b,{x:16,y:16},p.B);u(a,b,!0);v.g.restore()});v.g.restore()}$(){0===this.g?
f(new sb):Ia()}}let vb=new ub,wb=["new game","continue","about"],xb=["Optimized for Firefox 2+","Asbestos Free","Not tested on animals","Requires MS-DOS 5.0 or later","For up-to 1 players"],yb="";
class zb{constructor(){this.g=0}l(){X&&X?.source?.stop();yb=xb[Math.floor(Math.random()*xb.length)]}v(){["THIRTEEN","TERRIBLE","STUNTS"].forEach((a,b)=>[p.B,p.m].forEach((c,d)=>x(v,{text:a,x:160-d,y:40+15*b-d,textAlign:"center",color:c,size:2})));wb.forEach((a,b)=>{x(v,{text:a,x:160,y:120+16*b,textAlign:"center",color:b===this.g?p.m:p.A,size:1})});v.g.save();v.g.globalAlpha=.5;v.g.translate(.5,.5);v.g.rotate(-25);v.g.scale(8,8);u(2,{x:3,y:13});v.g.restore();x(v,{text:yb,x:160,y:245,textAlign:"center",
color:p.B,size:1})}qa(){this.g--;0>this.g&&(this.g=wb.length-1)}pa(){this.g++;this.g>wb.length-1&&(this.g=0)}$(){0===this.g&&(J.g=-1,f(vb))}}let h=new zb;
class Ab{constructor(){this.M=this.P=this.S=this.R=this.L=this.I=!1;this.g=new Map;this.i={I:this.I,L:this.L,S:this.S,R:this.R,P:this.P,M:this.M};document.addEventListener("keydown",a=>{this.g.set(a.code,!0)});document.addEventListener("keyup",a=>{this.g.set(a.code,!1)});this.j=new DOMPoint}v(a){this.i.I=this.I;this.i.L=this.L;this.i.P=this.P;this.i.M=this.M;let b=this.g.get("KeyA")||this.g.get("KeyQ")||this.g.get("ArrowLeft")?-1:0,c=this.g.get("KeyD")||this.g.get("ArrowRight")?1:0,d=this.g.get("KeyW")||
this.g.get("KeyZ")||this.g.get("ArrowUp")?-1:0,e=this.g.get("KeyS")||this.g.get("ArrowDown")?1:0;this.j.x=b+c||0;this.j.y=d+e||0;this.I=0>this.j.y;this.L=0<this.j.y;this.R=0>this.j.x;this.S=0<this.j.x;this.P=!!this.g.get("Enter")||!!this.g.get("Space");(this.M=!!this.g.get("Escape"))&&g.g!=h&&f(h);this.I&&(this.i.I||"function"==typeof a.qa&&a.qa());this.L&&(this.i.L||"function"==typeof a.pa&&a.pa());this.S&&(this.i.S||"function"==typeof a.xa&&a.xa());this.R&&(this.i.R||"function"==typeof a.wa&&a.wa());
this.P&&(this.i.P||"function"==typeof a.$&&a.$());this.M&&(this.i.M||"function"==typeof a.va&&a.va())}}let L=new Ab;document.querySelector('link[type="image/x-icon"]').href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ctext y='.9em' font-size='90'%3E\ud83c\udf9e%3C/text%3E%3C/svg%3E";g=new aa(...[]);let Bb=0,Cb=[];X=new lb;
function Db(a){let b=a-Bb;Bb=a;Cb.push(1E3/b);15===Cb.length&&(fps.innerHTML=`${Math.round(Cb.reduce((c,d)=>c+d)/15)} FPS`,Cb=[]);ta();a=g.g;L.v(a);a.v(b);a.ra&&a.ra(b);Fa(b);requestAnimationFrame(Db)}requestAnimationFrame(Db);
